#!/usr/bin/env bash

##
# Conditionally creates a symlink based on user input
function ask_yes_or_no() {
    echo $HOME/.$1
    echo $DOTFILES/$2/$1
    read -p ".$1 exists. Overwrite? ([y]es or [N]o): "
    case $(echo $REPLY | tr '[A-Z]' '[a-z]') in
        y|yes) echo 'OK, overwriting...' && overwrite $HOME/.$1 $DOTFILES/$2/$1 ;;
        *)   echo 'OK, skipping...'   ;;
    esac
}

## $1 : Destination path
## $2 : Resource path 
function overwrite {
  rm $1
  ln -s $2 $1
}


##
# Reset current path to $HOME
function go_home {
  cd $HOME
}

##
# Assembles a couple functions to conditionally
# overwrite a file
function loop_and_conditionally_overwrite {
  for f in `ls $DOTFILES/$1`; do
    if [ -e "$HOME/.$f" ]; then
      ask_yes_or_no $f $1
    else
      ln -s $DOTFILES/$1/$f $HOME/.$f
    fi
  done
}
